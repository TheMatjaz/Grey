<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Grey: Grey codes a.k.a. Reflected binary codes in C, made simple</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Grey
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
   <div id="projectbrief">Simple Grey codes a.k.a. Reflected Binary Codes library.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Grey codes a.k.a. Reflected binary codes in C, made simple </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Grey codes or Reflected binary codes are encodings of unsigned integers such that two adjacent values have only 1 bit of difference. Originally designed for electromechanical switches so that the state would transition cleanly from one value to the other without other values being represented in between. More details on <a href="https://en.wikipedia.org/wiki/Gray_code">Wikipedia</a>.</p>
<p>This is a tiny tiny C99 library that converts unsigned integers of any size from and to Grey codes.</p>
<p>By default, the library will operate on <code>uint64_t</code> integers for conversions from/to Grey codes. If you prefer using smaller integer (but also limit the domain of the Grey codes and their values), redefine the macro <code>GREY_UINTBITS</code> to 32, 16 or 8 instead of 64.</p>
<h1><a class="anchor" id="autotoc_md0"></a>
Usage example</h1>
<div class="fragment"><div class="line"><span class="comment">// Convert to Grey code</span></div>
<div class="line"><a class="code" href="grey_8h.html#a323c33b9775b3b43882ea58b402f1ef1">grey_code_t</a> my_code = <a class="code" href="grey_8h.html#ab2166835fe405aaa4dbf9759aab2591e">grey_to</a>(10); <span class="comment">// my_code is now 0b1111 = 0x0F = 15</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Convert from Grey code</span></div>
<div class="line"><a class="code" href="grey_8h.html#a56c07cb94e316d79616b9b93d73d423b">grey_int_t</a> my_value = <a class="code" href="grey_8h.html#a7eb6ea869cad93cb34d3584a793e766b">grey_from</a>(my_code);  <span class="comment">// my_value is now 10 again</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Handy macro for incrementing Grey codes</span></div>
<div class="line"><a class="code" href="grey_8h.html#a323c33b9775b3b43882ea58b402f1ef1">grey_code_t</a> my_code = <a class="code" href="grey_8h.html#ab2166835fe405aaa4dbf9759aab2591e">grey_to</a>(103);  <span class="comment">// my_code is now 84, representing 103</span></div>
<div class="line">my_code = <a class="code" href="grey_8h.html#a97ac4be7d19b9634408e7927188197fa">grey_incr</a>(my_value);  <span class="comment">// my_code is now 92, representing 104</span></div>
<div class="line">my_value = <a class="code" href="grey_8h.html#a7eb6ea869cad93cb34d3584a793e766b">grey_from</a>(my_code);  <span class="comment">// my_value is now 103</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Or for decrementing</span></div>
<div class="line">my_code = <a class="code" href="grey_8h.html#a758a95d11d1228b448ec3ab38039a03f">grey_decr</a>(85);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Or for custom addition/subtraction (may be unsafe!)</span></div>
<div class="line">my_code = <a class="code" href="grey_8h.html#af22f0b136d5f74432c0df5201fa4e7cc">grey_add</a>(85, 5);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Printing format</span></div>
<div class="line">my_code = <a class="code" href="grey_8h.html#ab2166835fe405aaa4dbf9759aab2591e">grey_to</a>(42);</div>
<div class="line">printf(<span class="stringliteral">&quot;Int %u &quot;</span></div>
<div class="line">       <span class="stringliteral">&quot;= Grey decimal %&quot;</span> <a class="code" href="grey_8h.html#a0312cadec0e0f1780825a2d889bdc8b5">GREY_FMT</a></div>
<div class="line">       <span class="stringliteral">&quot; = Grey lowercase hex 0x%&quot;</span> <a class="code" href="grey_8h.html#ae8c14d7f584f309d4a67f354fb96f7d6">GREY_FMTx</a></div>
<div class="line">       <span class="stringliteral">&quot; = Grey uppercase hex 0x%&quot;</span> <a class="code" href="grey_8h.html#aeafd61a6517f31e76e0e3ed21b02bf4d">GREY_FMTX</a> <span class="stringliteral">&quot;\n&quot;</span>,</div>
<div class="line">       42, my_code, my_code, my_code);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Converting to binary string</span></div>
<div class="line"><span class="keywordtype">char</span> binstr[<a class="code" href="grey_8h.html#af8516d7f0cb7919150a3d5d4d1708679">GREY_UINTBITS</a> + 1];</div>
<div class="line">uint8_t len = <a class="code" href="grey_8h.html#af29528914476efcdd9db40b6b8bda8df">grey_binstr</a>(binstr, 7);  <span class="comment">// str now contains &quot;111\0&quot;, len is 3</span></div>
</div><!-- fragment --><p>You can also check the <code>tst/test.c</code> file for more examples.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Include it in your project</h1>
<h2><a class="anchor" id="autotoc_md2"></a>
Static source inclusion</h2>
<p>Copy the <code><a class="el" href="grey_8h.html">inc/grey.h</a></code> and <code>src/grey.c</code> files into your existing C project, add them to the source folders and compile. Done.</p>
<p>If you prefer using smaller integers, redefine <code>GREY_UINTBITS</code>.</p>
<h2><a class="anchor" id="autotoc_md3"></a>
Compiling into all possible targets</h2>
<div class="fragment"><div class="line">mkdir build &amp;&amp; cd build</div>
<div class="line">cmake .. -DCMAKE_BUILD_TYPE=Release -DGREY_UINTBITS=64</div>
<div class="line">cmake --build .</div>
</div><!-- fragment --><p>This will build all targets:</p>
<ul>
<li>a <code>libgrey.dylib</code>/<code>libgrey.dll</code> shared library</li>
<li>a <code>libgreystatic.a</code> static library</li>
<li>a test runner executable <code>test_grey</code></li>
<li>the Doxygen documentation (if Doxygen is installed)</li>
</ul>
<p>To compile with the optimisation for size, use the <code>-DCMAKE_BUILD_TYPE=MinSizeRel</code> flag instead.</p>
<p>If you prefer using smaller integers, set <code>-DGREY_UINTBITS=32</code> (or 16 or 8). </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<div class="ttc" id="agrey_8h_html_a7eb6ea869cad93cb34d3584a793e766b"><div class="ttname"><a href="grey_8h.html#a7eb6ea869cad93cb34d3584a793e766b">grey_from</a></div><div class="ttdeci">grey_int_t grey_from(grey_code_t grey)</div><div class="ttdoc">Converts a Grey-encoded value into a regular binary unsigned integer.</div></div>
<div class="ttc" id="agrey_8h_html_a0312cadec0e0f1780825a2d889bdc8b5"><div class="ttname"><a href="grey_8h.html#a0312cadec0e0f1780825a2d889bdc8b5">GREY_FMT</a></div><div class="ttdeci">#define GREY_FMT</div><div class="ttdef"><b>Definition:</b> grey.h:103</div></div>
<div class="ttc" id="agrey_8h_html_a56c07cb94e316d79616b9b93d73d423b"><div class="ttname"><a href="grey_8h.html#a56c07cb94e316d79616b9b93d73d423b">grey_int_t</a></div><div class="ttdeci">grey_code_t grey_int_t</div><div class="ttdoc">Binary value (regular integer), of the same size as Grey-coded values.</div><div class="ttdef"><b>Definition:</b> grey.h:129</div></div>
<div class="ttc" id="agrey_8h_html_aeafd61a6517f31e76e0e3ed21b02bf4d"><div class="ttname"><a href="grey_8h.html#aeafd61a6517f31e76e0e3ed21b02bf4d">GREY_FMTX</a></div><div class="ttdeci">#define GREY_FMTX</div><div class="ttdef"><b>Definition:</b> grey.h:105</div></div>
<div class="ttc" id="agrey_8h_html_ae8c14d7f584f309d4a67f354fb96f7d6"><div class="ttname"><a href="grey_8h.html#ae8c14d7f584f309d4a67f354fb96f7d6">GREY_FMTx</a></div><div class="ttdeci">#define GREY_FMTx</div><div class="ttdef"><b>Definition:</b> grey.h:104</div></div>
<div class="ttc" id="agrey_8h_html_af29528914476efcdd9db40b6b8bda8df"><div class="ttname"><a href="grey_8h.html#af29528914476efcdd9db40b6b8bda8df">grey_binstr</a></div><div class="ttdeci">uint8_t grey_binstr(char str[GREY_UINTBITS+1], grey_code_t grey)</div><div class="ttdoc">Fills a string with the Grey code in binary representation.</div></div>
<div class="ttc" id="agrey_8h_html_a758a95d11d1228b448ec3ab38039a03f"><div class="ttname"><a href="grey_8h.html#a758a95d11d1228b448ec3ab38039a03f">grey_decr</a></div><div class="ttdeci">#define grey_decr(grey)</div><div class="ttdoc">Utility wrapper decrementing a Grey-encoded value by 1.</div><div class="ttdef"><b>Definition:</b> grey.h:158</div></div>
<div class="ttc" id="agrey_8h_html_ab2166835fe405aaa4dbf9759aab2591e"><div class="ttname"><a href="grey_8h.html#ab2166835fe405aaa4dbf9759aab2591e">grey_to</a></div><div class="ttdeci">grey_code_t grey_to(grey_int_t value)</div><div class="ttdoc">Converts a regular binary unsigned integer to Grey code.</div></div>
<div class="ttc" id="agrey_8h_html_af22f0b136d5f74432c0df5201fa4e7cc"><div class="ttname"><a href="grey_8h.html#af22f0b136d5f74432c0df5201fa4e7cc">grey_add</a></div><div class="ttdeci">#define grey_add(grey, delta)</div><div class="ttdoc">Utility wrapper adding/subtracting a delta to a Grey-encoded value.</div><div class="ttdef"><b>Definition:</b> grey.h:140</div></div>
<div class="ttc" id="agrey_8h_html_a97ac4be7d19b9634408e7927188197fa"><div class="ttname"><a href="grey_8h.html#a97ac4be7d19b9634408e7927188197fa">grey_incr</a></div><div class="ttdeci">#define grey_incr(grey)</div><div class="ttdoc">Utility wrapper incrementing a Grey-encoded value by 1.</div><div class="ttdef"><b>Definition:</b> grey.h:149</div></div>
<div class="ttc" id="agrey_8h_html_a323c33b9775b3b43882ea58b402f1ef1"><div class="ttname"><a href="grey_8h.html#a323c33b9775b3b43882ea58b402f1ef1">grey_code_t</a></div><div class="ttdeci">uint64_t grey_code_t</div><div class="ttdef"><b>Definition:</b> grey.h:101</div></div>
<div class="ttc" id="agrey_8h_html_af8516d7f0cb7919150a3d5d4d1708679"><div class="ttname"><a href="grey_8h.html#af8516d7f0cb7919150a3d5d4d1708679">GREY_UINTBITS</a></div><div class="ttdeci">#define GREY_UINTBITS</div><div class="ttdef"><b>Definition:</b> grey.h:53</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
